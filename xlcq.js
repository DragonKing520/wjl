/*
注册：http://xl.qunx.cc:96/h5/page/register-qr.html?c=315773
小龙传奇
变量 xlcq 格式：手机号1#密码1@手机号2#密码2  
账号用 @ 分割
提现金额 xlcqtx  值默认为 1
*/
const $ = new Env('小龙传奇');
const _0x100b02=_0x4ef6,_0x49c43a=_0x223a,_0x218b4e=_0x1056;function _0x223a(_0x5f27b7,_0x1dad71){const _0x26f828=_0x26f8();return _0x223a=function(_0x223a99,_0x1b6e32){_0x223a99=_0x223a99-0x125;let _0xb8a4df=_0x26f828[_0x223a99];return _0xb8a4df;},_0x223a(_0x5f27b7,_0x1dad71);}(function(_0x27156c,_0x44d305){const _0x232227=_0x1056,_0x2a4591=_0x223a,_0x234cfc=_0x4ef6,_0x179857=_0x27156c();while(!![]){try{const _0xf620be=parseInt(_0x234cfc(0x146,'0jaJ'))/0x1*(parseInt(_0x2a4591(0x153))/0x2)+parseInt(_0x232227('0x17b'))/0x3+parseInt(_0x232227(0x16b))/0x4*(-parseInt(_0x234cfc('0x15e','UwDF'))/0x5)+-parseInt(_0x2a4591(0x159))/0x6*(parseInt(_0x2a4591('0x168'))/0x7)+parseInt(_0x232227(0x148))/0x8*(-parseInt(_0x234cfc('0x15f','^6KN'))/0x9)+parseInt(_0x2a4591('0x12b'))/0xa*(-parseInt(_0x2a4591('0x135'))/0xb)+parseInt(_0x2a4591('0x130'))/0xc;if(_0xf620be===_0x44d305)break;else _0x179857['push'](_0x179857['shift']());}catch(_0x89278c){_0x179857['push'](_0x179857['shift']());}}}(_0x26f8,0x197d0));function _0x4ef6(_0x5f27b7,_0x1dad71){const _0x26f828=_0x26f8();return _0x4ef6=function(_0x223a99,_0x1b6e32){_0x223a99=_0x223a99-0x125;let _0xb8a4df=_0x26f828[_0x223a99];if(_0x4ef6['fOoLdK']===undefined){var _0x190997=function(_0x1b3d6a){const _0x72dfe8='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4dc6ed='',_0x552d21='';for(let _0xbf2811=0x0,_0x270d7e,_0x4ef62e,_0x37a2e4=0x0;_0x4ef62e=_0x1b3d6a['charAt'](_0x37a2e4++);~_0x4ef62e&&(_0x270d7e=_0xbf2811%0x4?_0x270d7e*0x40+_0x4ef62e:_0x4ef62e,_0xbf2811++%0x4)?_0x4dc6ed+=String['fromCharCode'](0xff&_0x270d7e>>(-0x2*_0xbf2811&0x6)):0x0){_0x4ef62e=_0x72dfe8['indexOf'](_0x4ef62e);}for(let _0x4e8166=0x0,_0x3a9248=_0x4dc6ed['length'];_0x4e8166<_0x3a9248;_0x4e8166++){_0x552d21+='%'+('00'+_0x4dc6ed['charCodeAt'](_0x4e8166)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x552d21);};const _0x1056c9=function(_0x5a0d56,_0x263425){let _0x116f27=[],_0x3aca3d=0x0,_0x22fca8,_0x3149e4='';_0x5a0d56=_0x190997(_0x5a0d56);let _0x4f5a59;for(_0x4f5a59=0x0;_0x4f5a59<0x100;_0x4f5a59++){_0x116f27[_0x4f5a59]=_0x4f5a59;}for(_0x4f5a59=0x0;_0x4f5a59<0x100;_0x4f5a59++){_0x3aca3d=(_0x3aca3d+_0x116f27[_0x4f5a59]+_0x263425['charCodeAt'](_0x4f5a59%_0x263425['length']))%0x100,_0x22fca8=_0x116f27[_0x4f5a59],_0x116f27[_0x4f5a59]=_0x116f27[_0x3aca3d],_0x116f27[_0x3aca3d]=_0x22fca8;}_0x4f5a59=0x0,_0x3aca3d=0x0;for(let _0x5be0d9=0x0;_0x5be0d9<_0x5a0d56['length'];_0x5be0d9++){_0x4f5a59=(_0x4f5a59+0x1)%0x100,_0x3aca3d=(_0x3aca3d+_0x116f27[_0x4f5a59])%0x100,_0x22fca8=_0x116f27[_0x4f5a59],_0x116f27[_0x4f5a59]=_0x116f27[_0x3aca3d],_0x116f27[_0x3aca3d]=_0x22fca8,_0x3149e4+=String['fromCharCode'](_0x5a0d56['charCodeAt'](_0x5be0d9)^_0x116f27[(_0x116f27[_0x4f5a59]+_0x116f27[_0x3aca3d])%0x100]);}return _0x3149e4;};_0x4ef6['yFIZUs']=_0x1056c9,_0x5f27b7=arguments,_0x4ef6['fOoLdK']=!![];}const _0x165360=_0x26f828[0x0],_0x2bda35=_0x223a99+_0x165360,_0x1d6d1f=_0x5f27b7[_0x2bda35];return!_0x1d6d1f?(_0x4ef6['nZdvOz']===undefined&&(_0x4ef6['nZdvOz']=!![]),_0xb8a4df=_0x4ef6['yFIZUs'](_0xb8a4df,_0x1b6e32),_0x5f27b7[_0x2bda35]=_0xb8a4df):_0xb8a4df=_0x1d6d1f,_0xb8a4df;},_0x4ef6(_0x5f27b7,_0x1dad71);}function _0x26f8(){const _0x3e1f16=['110830elkhBN','55Qj6zQA5As56ls6776r','y29Kzq','qSkqW4m','Cg9ZDa','273840bVPYGx','pCk2xrXWhCoCd8kkmCkkW7xcH8oiW4NdUdTxrmoA','zICQW43cRhr1WPfHWRT0g3KzvwnnlNdcNeZdMSonduDDW4pdQhu4W4T8mbDWW4ZcLCkvW6zCW7GbW7P2pSk7WOJcRhvA','W4xcM0W','qfT2WOVdIa','77MQmUNZ','55QA6zIf5OMH5yUq','catch','http://xl.qunx.cc:96/h5/page/login.html','EgXJCxr4','sX3cGqSGW6ddSda','Ahr0CdOVl3HSlNf1BNGUy2m6otyVAduVCgfNzs9OB21LlMH0BwW','eSoJW7HeW4ZdP1tdTW','WRhdOhHpFLpcSXddJh4gWPBcGulcVw7dRCozWPu2WPZcSCkLWPFcK8kFW6W1W7msW4y2asGs','BgvUz3rO',';\x20userid=','jCoMFSkyW5ZcQW','yMfZzty0','isNode','4HaJSIe','z2v0zgf0yq','BxnN','WPbPqs07WOJcMCkqvX4','length','ntaWodHwEMPcvNa','Dg9Rzw4','zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7','q2ZdMqafimoP','W5ZcH3JdPYxdQM3cUa',';\x20mobile=xl','post','log','5Q+p5lIQ5A2x56YM','6l2C5O2z5zc3','xl.qunx.cc:96','106BGKWuv','finally','zCodW6ldSa','PHPSESSID=g19084jhus9lte9fl41sfa1lrm;\x20wx=;\x20qq=;\x20qqq=;\x20token=;\x20mobile=;\x20userid=;\x20nickname=;\x20is_pay=;\x20level=;\x20diamond=;\x20brick=;\x20is_check=;\x20invite_code=;\x20direct_pay=;\x20alipay_name=;\x20alipay_account=;\x20type=;\x20direct=;\x20p_mobile=;\x20p_wx=;\x20p_qq=;\x20p_qqq=;\x20p_nickname=;\x20money=','WQC/WPOM','WQxdI8kbWR5K','356526lkgTJy','WRRdM8orW6FcJ8ovbCkUg8oKWPe','WQ3cLSox','\x0a开始【小龙传奇','Mozilla/5.0\x20(Linux;\x20Android\x2012;\x202201122C\x20Build/SKQ1.211006.001;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/95.0.4638.74\x20Mobile\x20Safari/537.36\x20Html5Plus/1.0','W7pdJmkjWRddNmkpmSkbdSkkW6ldOa','zSkDbSoIvmkeWR/dKW','WRytW4fpDZddP2iqW73cH8odqNVLH6S','WR/cUmkj','split','msg','Dw5KzwzPBMvK','CgfYC2u','mJy5ow5iC0DszW','http://xl.qunx.cc:96/home/user/cash?v=0730211314&money=','7lAVOwS','zw52','W6eHzmkqgmofWO3cMJfrWRTjvmk/WPO','neHHsLnjzq','http://xl.qunx.cc:96/h5/page/home.html','keep-alive','y2HHCKnVzgvbDa','mZu2nti2BgTNveP5','oYb1C2vYAwq9','WPmMaspdUdpdQ1BcGSkw','nCo+ACkzWPldVmkmWORcRHhcM8kClYHqWOjrW6ONWQyaFSk8W6OriSkrWRhdU8kcW4zsjCo1nb/cNmoXpxtdH8kXWPPKW4VcKx/dGt3cHSoSASoape03Emox','W4abza','mJCZodqWyLzqwuD4','logErr','WRhdGCkeWQC8W4K3oxf4s8o8ga','jWaXW5JcR8knFmkuvd3cLcq','iGe+WQldMCoYESkUAW','PHPSESSID=g19084jhus9lte9fl41sfa1lrm;token=','o27cLSk8','nde5ode0uu9jBeHO','xlcq','5lIQ6lsM5y+3ls0Tls0Tls0Tls0TlqO','mJu5nda1qKfHteLm','index','WOpdNuVdRvS','EgWUCxvUEc5JyZO5nG','C3bSAxq','ueHqu0vtu0LepwCXota4ngPODxm5BhrLowzSndfZzMeXBhjTo3rVA2vUpq'];_0x26f8=function(){return _0x3e1f16;};return _0x26f8();}let status;status=(status=$['getval']('ddtjstatus')||'1')>0x1?''+status:'';let lxsjhArr=[],phone='',pwd='',xlcq=($['isNode']()?process[_0x218b4e(0x169)][_0x49c43a(0x17c)]:$['getdata'](_0x100b02('0x155','$H17')))||'',xlcqtx=($[_0x49c43a(0x142)]()?process[_0x100b02('0x173','fhK5')][_0x100b02('0x140','Xz%y')]:$[_0x218b4e('0x144')](_0x218b4e('0x139')))||'1';!(async()=>{const _0x164b84=_0x49c43a,_0x200e07=_0x100b02,_0x2b51e3=_0x218b4e;if(typeof $request!==_0x2b51e3(0x164))await ddtjck();else{lxsjhArr=xlcq[_0x200e07(0x158,'Uz1l')]('@'),console[_0x164b84(0x14f)](_0x200e07(0x160,')yQ8')+lxsjhArr['length']+_0x2b51e3(0x17d));for(let _0x3aca3d=0x0;_0x3aca3d<lxsjhArr[_0x2b51e3('0x13e')];_0x3aca3d++){lxsjh=lxsjhArr[_0x3aca3d],$[_0x164b84('0x126')]=_0x3aca3d+0x1,phone=lxsjh[_0x164b84('0x162')]('#')[0x0],pwd=lxsjh[_0x2b51e3(0x129)]('#')[0x1],console[_0x200e07(0x12e,'6&%D')](_0x164b84('0x15c')+$[_0x164b84('0x126')]+'】'),await lxdl();}}})()[_0x49c43a(0x137)](_0x22fca8=>$[_0x49c43a('0x175')](_0x22fca8))[_0x49c43a(0x154)](()=>$[_0x100b02('0x17a','%tRF')]());function stringToBase64(_0x3149e4){const _0x35ef35=_0x218b4e,_0x3ee1b6=_0x100b02;var _0x4f5a59=Buffer[_0x3ee1b6('0x157','$Nu0')](_0x3149e4)[_0x3ee1b6('0x14c','PpJm')](_0x35ef35('0x141'));return _0x4f5a59;}function lxdl(_0x5be0d9=0x0){return new Promise(_0x14c6bb=>{const _0x19fde4=_0x223a,_0x55e607=_0x4ef6;let _0x17efd={'url':_0x55e607('0x132','5YiN'),'headers':{'Host':_0x19fde4('0x152'),'Connection':_0x19fde4(0x16d),'User-Agent':_0x19fde4(0x15d),'Content-Type':'application/json','Origin':_0x55e607(0x131,'s]qf'),'X-Requested-With':_0x55e607('0x16a','NpfY'),'Referer':_0x19fde4(0x138),'Accept-Encoding':_0x55e607('0x176','Uz1l'),'Accept-Language':'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7','Cookie':_0x19fde4('0x156')},'body':_0x55e607('0x15a','UwDF')+phone+',\x22pwd\x22:\x22'+pwd+'\x22}'};$[_0x19fde4('0x14e')](_0x17efd,async(_0x1d6c27,_0x5f5a2a,_0x1d6092)=>{const _0x46dd3a=_0x1056,_0x451c55=_0x55e607;try{let _0x490520=JSON[_0x451c55(0x134,'^rY2')](_0x1d6092);_0x490520[_0x46dd3a(0x12d)]==0x1?(console[_0x451c55('0x15b','UwDF')](_0x451c55(0x136,'#[dV')),await ddtjopen(_0x490520[_0x46dd3a(0x149)],_0x490520['id']),await txxx(_0x490520[_0x46dd3a(0x149)],_0x490520['id'])):console['log'](_0x451c55(0x12c,'6y[3')+_0x490520[_0x451c55(0x133,'PpJm')]);}catch(_0x4f97c8){}finally{_0x14c6bb();}},_0x5be0d9);});}function ddtjopen(_0x50a1b2,_0x200621,_0x39cc84=0x0){return new Promise(_0x421327=>{const _0x205b8d=_0x223a,_0x27283f=_0x1056,_0x1e67d5=_0x4ef6;let _0x129830={'url':_0x1e67d5(0x172,'Xz%y'),'headers':{'Host':_0x27283f('0x128'),'Connection':_0x205b8d('0x16d'),'dragon-id':_0x200621,'dragon-token':_0x50a1b2,'User-Agent':'Mozilla/5.0\x20(Linux;\x20Android\x2012;\x202201122C\x20Build/SKQ1.211006.001;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/95.0.4638.74\x20Mobile\x20Safari/537.36\x20Html5Plus/1.0','X-Requested-With':'nl.yiyou.dragon','Referer':_0x27283f(0x13b),'Accept-Language':_0x1e67d5('0x13d','(Hvk'),'Cookie':_0x27283f('0x12a')+_0x50a1b2+';\x20mobile=xl'+phone+_0x205b8d(0x13f)+_0x200621}};$['post'](_0x129830,async(_0x5f928e,_0x590560,_0x47ca5c)=>{const _0x1066dd=_0x27283f,_0x110499=_0x205b8d,_0x5c65e8=_0x1e67d5;try{let _0x575153=JSON[_0x5c65e8('0x127','ivv2')](_0x47ca5c);console[_0x110499(0x14f)](_0x575153[_0x1066dd(0x145)]);}catch(_0x3d94d7){}finally{_0x421327();}},_0x39cc84);});}function _0x1056(_0x5f27b7,_0x1dad71){const _0x26f828=_0x26f8();return _0x1056=function(_0x223a99,_0x1b6e32){_0x223a99=_0x223a99-0x125;let _0xb8a4df=_0x26f828[_0x223a99];if(_0x1056['WkEvgI']===undefined){var _0x190997=function(_0x1056c9){const _0x1b3d6a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x72dfe8='',_0x4dc6ed='';for(let _0x552d21=0x0,_0xbf2811,_0x270d7e,_0x4ef62e=0x0;_0x270d7e=_0x1056c9['charAt'](_0x4ef62e++);~_0x270d7e&&(_0xbf2811=_0x552d21%0x4?_0xbf2811*0x40+_0x270d7e:_0x270d7e,_0x552d21++%0x4)?_0x72dfe8+=String['fromCharCode'](0xff&_0xbf2811>>(-0x2*_0x552d21&0x6)):0x0){_0x270d7e=_0x1b3d6a['indexOf'](_0x270d7e);}for(let _0x37a2e4=0x0,_0x4e8166=_0x72dfe8['length'];_0x37a2e4<_0x4e8166;_0x37a2e4++){_0x4dc6ed+='%'+('00'+_0x72dfe8['charCodeAt'](_0x37a2e4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4dc6ed);};_0x1056['LlGeES']=_0x190997,_0x5f27b7=arguments,_0x1056['WkEvgI']=!![];}const _0x165360=_0x26f828[0x0],_0x2bda35=_0x223a99+_0x165360,_0x1d6d1f=_0x5f27b7[_0x2bda35];return!_0x1d6d1f?(_0xb8a4df=_0x1056['LlGeES'](_0xb8a4df),_0x5f27b7[_0x2bda35]=_0xb8a4df):_0xb8a4df=_0x1d6d1f,_0xb8a4df;},_0x1056(_0x5f27b7,_0x1dad71);}function txxx(_0x28c6b0,_0x372f0f,_0x3867f5=0x0){return new Promise(_0x157673=>{const _0xe9f637=_0x1056,_0x72e61f=_0x223a;let _0x568838={'url':_0x72e61f('0x167')+xlcqtx,'headers':{'Host':'xl.qunx.cc:96','Connection':_0x72e61f('0x16d'),'dragon-id':_0x372f0f,'dragon-token':_0x28c6b0,'User-Agent':'Mozilla/5.0\x20(Linux;\x20Android\x2012;\x202201122C\x20Build/SKQ1.211006.001;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/95.0.4638.74\x20Mobile\x20Safari/537.36\x20Html5Plus/1.0','X-Requested-With':'nl.yiyou.dragon','Referer':_0x72e61f('0x16c'),'Accept-Language':_0x72e61f('0x14a'),'Cookie':_0x72e61f('0x179')+_0x28c6b0+_0x72e61f(0x14d)+phone+_0xe9f637('0x170')+_0x372f0f},'body':''};$[_0xe9f637('0x12f')](_0x568838,async(_0x5c7e00,_0x4b060d,_0xf05035)=>{const _0x3e102d=_0x72e61f,_0x513031=_0xe9f637;try{let _0x3494cb=JSON[_0x513031(0x165)](_0xf05035);console[_0x3e102d(0x14f)](_0x3494cb[_0x3e102d(0x163)]);}catch(_0x326515){}finally{_0x157673();}},_0x3867f5);});}function encodeUTF8(_0x4220c5){const _0x1bac38=_0x100b02,_0x489c14=_0x218b4e,_0x33cf1c=_0x49c43a;let _0x541706='';for(let _0x28d1b6=0x0;_0x28d1b6<_0x4220c5[_0x33cf1c('0x147')];_0x28d1b6++){let _0x59e52c=_0x4220c5[_0x28d1b6],_0x543238='';encodeURIComponent(_0x59e52c)[_0x489c14(0x13e)]<0x4?_0x543238=_0x59e52c[_0x489c14('0x16e')](0x0)['toString'](0x10):(_0x543238=encodeURIComponent(_0x59e52c),_0x543238=_0x543238[_0x1bac38('0x171','#[dV')]('%','')),console[_0x1bac38(0x161,'H%6x')](_0x489c14(0x150),_0x28d1b6,_0x59e52c,_0x543238),_0x541706+=_0x543238;}return console[_0x33cf1c('0x14f')](_0x1bac38(0x151,'Pnts'),_0x541706),_0x541706;}
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `\ud83d\udd14${this.name}, \u5f00\u59cb!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), a = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(a, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t) { let e = { "M+": (new Date).getMonth() + 1, "d+": (new Date).getDate(), "H+": (new Date).getHours(), "m+": (new Date).getMinutes(), "s+": (new Date).getSeconds(), "q+": Math.floor(((new Date).getMonth() + 3) / 3), S: (new Date).getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, ((new Date).getFullYear() + "").substr(4 - RegExp.$1.length))); for (let s in e) new RegExp("(" + s + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? e[s] : ("00" + e[s]).substr(("" + e[s]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))); let h = ["", "==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="]; h.push(e), s && h.push(s), i && h.push(i), console.log(h.join("\n")), this.logs = this.logs.concat(h) } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t.stack) : this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
